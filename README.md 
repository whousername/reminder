# Reminder Application

Backend REST API для управления напоминаниями.
Тестовое задание на позицию Java Developer.

---

## Tech Stack

- Java 21
- Spring Boot
- Spring Web (REST)
- Spring Data JPA (Hibernate)
- PostgreSQL
- Liquibase
- Spring Security (OAuth2)
- Gradle
- Docker / Docker Compose
- JUnit / Mockito

---

## Functional Overview

Приложение позволяет:
- создавать напоминания
- редактировать напоминания *TODO*
- удалять напоминания *TODO*
- получать список напоминаний с пагинацией *TODO*
- выполнять поиск / сортировку / фильтрацию *TODO*
- отправлять уведомления (email / telegram) *TODO*

---

## Domain Model
### Reminder

| Field       | Type           | Description                     |
|------------|----------------|---------------------------------|
| id         | bigint         | Unique identifier               |
| title      | varchar(255)   | Short title                     |
| description| varchar(4096)  | Full description                |
| remind_at  | timestamp      | Reminder date and time (ISO)    |
| user_id    | uuid           | Owner user id                   |

---

## API Endpoints

### Create reminder
POST /api/v1/reminder/create
Request body:
```json
{
  "title": "Test reminder",
  "description": "Description",
  "remind": "2026-02-27T10:00:00"
}
Response:
{
  "id": 4,
  "title": "Test reminder",
  "description": "Description",
  "remind": "2026-02-27T10:00:00",
  "user_id": "75fc1a26-20c3-41c3-98ca-fba20a3ee7e6"
}
```
(Other endpoints: TODO)

## **Keycloak / Authentication**

-   **Realm**  ups automatically with start application by docker-compose.

-   Realm has 3 test users (admin,  test_user1, test_user2).

-   For manual testing API need to get JWT token first.

### Getting JWT from "app-1" Docker-container
```
curl -X POST "http://keycloak:8080/realms/reminder/protocol/openid-connect/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=password" \
  -d "client_id=reminder-api" \
  -d "client_secret=lDhUrEuVR5yVC8QizaqGN3zOYxw4484o" \
  -d "username=admin" \
  -d "password=admin"
  ```


### Admin console
```
http://localhost:8081/admin/master/console/
```


## Project Structure

```
src/main/java
 ├── api
 │    ├── controller
 │    ├── request
 │    └── response
 ├── mapper
 ├── model
 │      └── entity
 ├── repo
 └── service
 ```



## Database & Migrations

- PostgreSQL
- Schema managed via Liquibase
- All changes applied automatically on application startup
- Test data loaded via CSV

## Configuration

Profiles:

  - local — run from IDE
  - docker — run inside Docker container
  - test - testing enviroment

Key configs:

  - Database connection
  - Liquibase migrations
  - Server port
  - Security / OAuth2 JWT


##  Build & Run

### Build application
    ./gradlew clean build

###  Build image with Docker
    docker build -t reminder-app:latest .

### Run with Docker
    docker-compose up -d

### Application will be available at:
    http://localhost:8080

### Manual API Test (CURL)
```
curl -X POST http://localhost:8080/api/v1/reminder/create \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer <access_token>" \
     -d '{
        "title": "Test reminder",
        "description": "Description",
        "remind": "2026-02-27T10:00:00"
        }'
```

## Tests:
- Unit tests for service layer (JUnit + Mockito)
- Basic integration test for Service + DB + Migrations (SpringBootTest, H2)


## Known Limitations / TODO

- Main endpoints and functionality
- Notification delivery (email / telegram)
- Advanced sorting
- Advanced filtering
- Full API documentation (OpenAPI / Swagger)
- Full unit and integration tests


## Architecture Notes

- Layered architecture: Controller → Service → Repository
- DTOs are used to isolate API from persistence model
- Database schema managed strictly via Liquibase
- Hibernate ddl-auto: validate
- Auto-increment handled on DB side (PostgreSQL sequence)
- Initial test data loaded via Liquibase loadData
